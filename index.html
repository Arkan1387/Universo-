<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> BitÃ¡cora de Canon V3.1 | Protocolo Î© PÃºblico</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0b1120; color: #cbd5e1; font-family: 'Inter', sans-serif; overflow-x: hidden; }
        .page-content { display: none; }
        .page-content.active { display: block; animation: fadeIn 0.2s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .nav-button.active { color: #38bdf8; border-bottom: 2px solid #38bdf8; background: #1e293b; }
        .sub-nav-button { font-size: 10px; padding: 6px 12px; border-radius: 4px; background: #1e293b; flex-shrink: 0; border: 1px solid #1e293b; }
        .sub-nav-button.active { background: #38bdf8; color: #0b1120; font-weight: bold; border-color: #38bdf8; }
        .sub-content { display: none; margin-top: 15px; }
        .sub-content.active { display: block; }
        .entry-card { background: #0f172a; border: 1px solid #1e293b; padding: 15px; border-radius: 12px; margin-bottom: 25px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.4); }
        .node-img { width: 100%; max-height: 250px; object-fit: cover; border-radius: 8px; margin-bottom: 12px; border: 1px solid #334155; }
        textarea { background: #161e2e; border: 1px solid #1e293b; width: 100%; padding: 12px; border-radius: 8px; outline: none; font-size: 14px; color: #cbd5e1; line-height: 1.6; }
        textarea:focus { border-color: #38bdf8; }
        ::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <header class="bg-slate-900 p-4 border-b border-slate-800 flex justify-between items-center sticky top-0 z-50">
        <h1 class="font-black text-white uppercase text-xs tracking-widest italic">Protocolo Î© V3.1</h1>
        <div class="flex gap-2">
            <button onclick="copyAndGo('https://chatgpt.com')" class="bg-indigo-600 text-[9px] px-2 py-1 rounded font-bold text-white uppercase italic">GPT</button>
            <button onclick="copyAndGo('https://gemini.google.com')" class="bg-blue-500 text-[9px] px-2 py-1 rounded font-bold text-white uppercase italic">Gemini</button>
            <button onclick="dataManager()" class="bg-slate-700 text-[10px] px-2 py-1 rounded font-bold text-white">ðŸ’¾ DATA</button>
        </div>
    </header>

    <nav id="main-nav" class="bg-slate-900 border-b border-slate-800 sticky top-[53px] z-40 overflow-x-auto flex flex-nowrap"></nav>

    <main class="flex-1 p-5 pb-24" id="content-container"></main>

    <script>
        const PREFIX = 'v11_';
        const SCHEMA = [
            { id: 'inicio', title: 'ðŸ Inicio', subs: [] },
            { id: 'mundo', title: 'ðŸŒSistema de Mundo', subs: ['Jerarquias', 'Megaplaneta Î©', 'Leyes del Nyra y Alma', 'Habilidades Nyricas', 'Dimensiones', 'Planetas Eje', 'Sistema', 'Reino Divino', 'Deseos'] },
            { id: 'notas', title: 'ðŸ“˜Notas', subs: ['Ideas', 'Borradores', 'Ideas Descartadas'] },
            { id: 'crono', title: 'âŒ›CronologÃ­a', subs: ['Pasado', 'Hitos Actuales', 'Importantes'] },
            { id: 'geo', title: 'ðŸ—ºï¸GeografÃ­a', subs: ['Territorio/Clima', 'Ciudades', 'Continentes'] },
            { id: 'caps', title: 'ðŸ“°CapÃ­tulos', subs: ['Estructura', 'ResÃºmenes', 'Progreso'] },
            { id: 'arte', title: 'âš”ï¸Artefactos', subs: ['MÃ¡gicos', 'TecnolÃ³gicos', 'Divinos'] },
            { id: 'gremio', title: 'ðŸ›ï¸Gremios', subs: ['Aventureros', 'Mercenarios', 'Comerciantes', 'Artesanos/Herreros', 'Investigadores', 'InformaciÃ³n', 'Exploradores', 'Asesinos'] },
            { id: 'animal', title: 'ðŸ²Animales', subs: ['Criaturas Naturales', 'Bestias Corruptas', 'Monstruos', 'Bestias Magicas', 'Entidades Abismales', 'Bestias Legendarias'] }
        ];

        // DATOS MAESTROS INYECTADOS
        const MASTER_DATA = {"mundo-0":[{"id":1767612440022,"title":"âŒ› RÎ©: LA TRINIDAD PRIMORDIAL","text":"El Creador (Luz/Bien): Representa el orden, la estructura y la creaciÃ³n de la materia. Es la fuerza que da propÃ³sito a las dimensiones.\n\nEl Destructor (Oscuridad/Mal): Representa el fin, la disoluciÃ³n y el vacÃ­o. No es \"malo\" por Ã©tica, sino por funciÃ³n; es el necesario contrapeso para que el sistema no colapse por sobrepoblaciÃ³n o estancamiento.\n\nEl Caos (EntropÃ­a): La fuerza impredecible que evita que el Bien y el Mal se anulen entre sÃ­. Es el motor de la evoluciÃ³n, el cambio y lo inesperado. Es lo que permite que existan las anomalÃ­as.","links":"","img":""},{"id":1767612425146,"title":"ðŸ“ RA - LOS ARQUITECTOS","text":"Entidades gemelas que sirven a la Trinidad Primordial. Son la encarnaciÃ³n de la CreaciÃ³n y la DestrucciÃ³n; ellos no manejan el Sistema, ellos son el Sistema.\n\nIdentidad: Representan la dualidad del Universo. Uno es el Arquitecto de la Luz (Creador) y el otro es el Arquitecto del VacÃ­o (Destructor).\n\nEl Sistema del Creador (EstÃ¡ndar): Es el protocolo activo en Î©. EstÃ¡ optimizado para la estabilidad, el crecimiento controlado y la preservaciÃ³n de la vida del portador. Es el \"camino seguro\" para los Elegidos.\n\nEl Sistema del Destructor (Experimental): Una arquitectura latente y mucho mÃ¡s peligrosa. A diferencia de la versiÃ³n del Creador, este sistema carece de filtros de seguridad.\n\nCapacidades Experimentales: El sistema del Destructor permite acceder a funciones \"prohibidas\": manipulaciÃ³n directa de la entropÃ­a, sobrecarga de Nyra sin lÃ­mite de seguridad y alteraciones conceptuales que el sistema estÃ¡ndar bloquea por ser letales.\n\nCosto: Al ser una herramienta de experimentaciÃ³n y borrado, su uso desgasta la Persistencia del alma a una velocidad catastrÃ³fica. Es poder absoluto a cambio de una desintegraciÃ³n acelerada.","links":"","img":""},{"id":1767612423382,"title":"ðŸŒŒ RD: EL CONSEJO DIVINO (DIOSES)","text":"Estatus: Nivel de autoridad mÃ¡xima y absoluta.\n\nNaturaleza: Todos los miembros son del mismo rango jerÃ¡rquico.","links":"","img":""},{"id":1767611597753,"title":"ðŸ”¥ RE: EX-DIOSES REBELDES","text":"Poder: Conservan capacidades divinas, pero operan desde las sombras o en oposiciÃ³n al Consejo.\n\nNaturaleza: Antiguos miembros del Consejo que rompieron el orden.","links":"","img":""},{"id":1767611589751,"title":"ðŸª RT: SEMIDIOSES (DIOSES MENORES)","text":"Naturaleza: Seres de menor grado que los Dioses Originales, pero con autoridad sobre dominios especÃ­ficos.\n\nClasificaciÃ³n por Dominio: Su tÃ­tulo y poder varÃ­an segÃºn la escala del territorio que controlan.","links":"","img":""},{"id":1767611589153,"title":"âš”ï¸ RO: ÃNGELES Y VALQUIRIAS","text":"Naturaleza: Intermediarios y ejecutores del sistema.\n\nÃngeles: DepuraciÃ³n y correcciÃ³n de errores tÃ©cnicos/mÃ¡gicos.\n\nValquirias: RecolecciÃ³n de almas y supervisiÃ³n de los elegidos. Su poder y comportamiento varÃ­an segÃºn su tipo especÃ­fico.","links":"","img":""},{"id":1767611588882,"title":"ðŸŒ€ RA: ENTIDADES DEL CAOS","text":"Naturaleza: Impredecibles y variables.\n\nPropiedad: No encajan en ninguna escala de poder fija. Pueden estar al nivel de un Dios o ser una molestia menor, dependiendo de su esencia.","links":"","img":""},{"id":1767611377302,"title":"ðŸ‘‘ RC: LA CÃšSPIDE (EL PRIMERO)","text":"Estatus: El mejor espÃ©cimen de su raza\n\nNaturaleza: Representante de su especie en el Megaplaneta Î©.","links":"","img":""},{"id":1767611375623,"title":"ðŸ‘¥ RM: LOS ELEGIDOS","text":"Naturaleza: Humanos comunes o destacados llevados a Î©.\n\nCondiciÃ³n: Solo estan en el universo Î© debido a que \"El Primero\" abriÃ³ el camino.\n\nEstatus: Pueden ser seres normales o extraordinarios dentro de su raza.","links":"","img":""}],"mundo-1":[{"id":1767679928502,"title":"ðŸŒŽ GeometrÃ­a y Escala","text":"Î© no es un planeta comÃºn; es el nÃºcleo de un universo entero. Su superficie es millones de veces mayor que la de la Tierra, lo que genera una curvatura del horizonte casi imperceptible. Caminar hacia el \"este\" puede tomar siglos si no se usan Habilidades Nyricas o Artefactos.","links":"","img":""},{"id":1767679927886,"title":"âš–ï¸ Gravedad y PresiÃ³n","text":"La gravedad es 4 o 5 veces superior a la estÃ¡ndar (BasÃ¡ndose en el de la Tierra). Sin el refuerzo del Nyra, un humano promedio morirÃ­a por colapso pulmonar o rotura de Ã³rganos internos en minutos. El aire es mÃ¡s denso, lo que hace que los sonidos viajen mÃ¡s lejos y el esfuerzo fÃ­sico sea extenuante.","links":"","img":""},{"id":1767679927171,"title":"ðŸŒ©ï¸ FenÃ³menos MeteorolÃ³gicos","text":"El clima no sigue ciclos estacionales lÃ³gicos. Existen incluso \"Tormentas de VacÃ­o\" que pueden desintegrar la materia y \"Lluvias de Nyra\" que recargan las habilidades pero pueden causar mutaciones si la exposiciÃ³n es prolongada. Existen muchos fenÃ³menos en el planeta Î©>. El cielo cambia de color segÃºn la dimensiÃ³n que estÃ© mÃ¡s \"cerca\" en ese momento.","links":"","img":""},{"id":1767679297627,"title":"ðŸŒ² Ecosistemas de AdaptaciÃ³n","text":"La vegetaciÃ³n en Î© es competitiva y a menudo carnÃ­vora o parÃ¡sita. Muchas plantas no fotosintetizan luz, sino que absorben Nyra del ambiente o de seres vivos. Los bosques pueden moverse o cambiar su topografÃ­a en cuestiÃ³n de dÃ­as.","links":"","img":""},{"id":1767679297155,"title":"ðŸŒ‹ Puntos de Convergencia","text":"Existen zonas donde el tejido de la realidad es delgado. En estos lugares, se pueden ver fragmentos de otras dimensiones (como restos de ciudades de la Tierra o paisajes de planetas eje desconocidos). Son zonas ricas en recursos pero patrulladas por Ãngeles de DepuraciÃ³n.","links":"","img":""}],"mundo-2":[{"id":1768036193254,"title":"âœ¨ Naturaleza y Flujo","text":"El Nyra es una sustancia metafÃ­sica cuantificable que actÃºa como el combustible para toda alteraciÃ³n de la realidad (Habilidades Nyricas).\n\nRegeneraciÃ³n: Se recupera lentamente mediante el descanso profundo o la absorciÃ³n de nÃºcleos energÃ©ticos.\n\nLÃ­mite CrÃ­tico: Cuando el Nyra llega a 0, el individuo entra en estado de \"Agotamiento Espiritual\", donde cualquier intento de usar poder activarÃ¡ el consumo de emergencia.","links":"","img":""},{"id":1768036192728,"title":"ðŸ’Ž El Alma","text":"El Alma no es energÃ­a, sino la esencia biolÃ³gica y metafÃ­sica que sostiene la identidad y la vida del individuo.\n\nPropiedad Finita: A diferencia del Nyra, el Alma es un recurso estÃ¡tico que NO se regenera de forma natural.\n\nIntegridad: Se mide en un porcentaje de \"Persistencia\". Perder integridad implica perder partes de la esencia original (memorias, sentidos, rasgos de personalidad).","links":"","img":""},{"id":1768036192185,"title":"âš ï¸ Protocolo Vital","text":"Mecanismo automÃ¡tico del sistema que ocurre cuando un individuo intenta activar una habilidad sin tener reservas de Nyra.\n\nCosto MecÃ¡nico: El sistema comienza a \"lijar\" la estructura del Alma para extraer la potencia necesaria.\n\nDaÃ±o Irreversible: Cada segundo de uso bajo este protocolo desgasta y reduce permanentemente el Alma y la Persistencia.","links":"","img":""},{"id":1768036191647,"title":"â˜£ï¸ Cicatrices y ParÃ¡sitos","text":"Un alma con baja integridad presenta \"huecos\" en su tejido existencial.\n\nConsecuencias: Estos huecos atraen a las Entidades del Caos o parÃ¡sitos de Nyra, que intentan ocupar el espacio vacÃ­o, provocando mutaciones aberrantes o la pÃ©rdida del libre albedrÃ­o.","links":"","img":""},{"id":1768036191173,"title":"ðŸ”— Resonancia colectiva","text":"El alma del primer individuo transportado de cada dimensiÃ³n sirve como el anclaje cuÃ¡ntico para su planeta de origen.\n\nUmbral CrÃ­tico: Si el alma del \"Primero\" cae por debajo del 10%, el canal dimensional se vuelve inestable, afectando la llegada y seguridad de los futuros Elegidos de esa misma dimensiÃ³n.","links":"","img":""}],"mundo-3":[{"id":1768036827268,"title":"ðŸ“œ ManifestaciÃ³n Nyrica","text":"La habilidad no nace de la prÃ¡ctica, sino de una revelaciÃ³n. Una vez que el individuo entra en contacto con la naturaleza interna del sistema se cristaliza en un poder Ãºnico.\n\nIdentidad: El nombre otorgado define la raÃ­z del poder. El usuario debe deducir sus funciones a travÃ©s del uso, ya que no hay guÃ­as previas.\n\nVÃ­nculo Vital: La habilidad estÃ¡ anclada directamente a la esencia del portador.","links":"","img":""},{"id":1768036826789,"title":"ðŸŒ¿ CategorÃ­as de Poder","text":"Aunque cada habilidad es Ãºnica, se manifiestan en tres variantes principales, estÃ¡s son las mÃ¡s comunes:\n\nAlteraciÃ³n Interna: Modificaciones del propio cuerpo, sentidos o capacidades biolÃ³gicas.\n\nProyecciÃ³n Externa: CreaciÃ³n o manipulaciÃ³n de elementos y energÃ­as fuera del cuerpo.\n\nInfluencia de Entorno: AlteraciÃ³n de las leyes fÃ­sicas o lÃ³gicas en un Ã¡rea determinada","links":"","img":""},{"id":1768036826385,"title":"ðŸ“Œ El Identificador","text":"El nombre de la habilidad es la primera verdad dictada por el Sistema tras procesar al individuo.\n\nFunciÃ³n: El portador solo recibe el nombre; el descubrimiento de sus funciones, lÃ­mites y leyes de activaciÃ³n es un proceso de exploraciÃ³n personal.\n\nCanalizaciÃ³n: El nombre actÃºa como la clave mental para estabilizar el flujo de Nyra durante los primeros usos de la habilidad.","links":"","img":""},{"id":1768036825975,"title":"âœ¨ Forma pura","text":"Es la primera expresiÃ³n fÃ­sica del poder, manifestÃ¡ndose como una pequeÃ±a emanaciÃ³n de energÃ­a directamente en la palma de la mano del portador.\n\nInterpretaciÃ³n: Esta forma ocurre de manera instintiva, incluso sin control previo, permitiendo al individuo observar la naturaleza de su energÃ­a (color, temperatura, densidad, etc) para deducir quÃ© es su poder.\n\nUso Inicial: Sirve como una herramienta de diagnÃ³stico para que el portador entienda la \"lÃ³gica\" de su habilidad antes de intentar proyectarla a mayor escala.","links":"","img":""},{"id":1768036825536,"title":"ðŸ”“ Apertura de Potencial","text":"La mayor parte del poder se encuentra bajo sellos para proteger el cuerpo mortal del portador.\n\nHitos: Los sellos se rompen tras superar situaciones de vida o muerte o demostrar un dominio de la forma actual.\n\nSub-capacidades: Las formas de aplicar la habilidad base depende del poder, esto hace que aumente su complejidad y potencia. Esto se divide en hechizos y subdivisiones que dependen de la imaginaciÃ³n, creatividad y su capacidad.","links":"","img":""},{"id":1768036825064,"title":"â›“ï¸ Restricciones Existenciales","text":"Ninguna capacidad es infinita. El uso de la habilidad estÃ¡ sujeto a:\n\nSaturaciÃ³n: El cuerpo tiene un lÃ­mite de cuÃ¡nta energÃ­a puede canalizar antes de sufrir daÃ±os internos.\n\nCosto de Nyra: Cada activaciÃ³n consume una cantidad especÃ­fica de energÃ­a. Si se agota, el poder empezarÃ¡ a devorar el soporte vital.\n\nAlcance: La efectividad disminuye drÃ¡sticamente a medida que el efecto se aleja del portador.","links":"","img":""}],"mundo-4":[{"id":1768038059395,"title":"ðŸŒŸ La Red de los Universos","text":"En la estructura del Rango Î© (Trinidad Primordial), la existencia no es un espacio infinito, sino un conjunto definido de burbujas de realidad llamadas Universos.\n\nCantidad: Existen exactamente Nueve Universos en total. Cada uno es independiente y posee su propio Consejo Divino (Rango 0) y sus propias Nueve Dimensiones internas.\n\nNaturaleza: Cada universo funciona como un ecosistema de almas. Siguen leyes de orden y equilibrio hasta que son marcados para el Protocolo Î©.\n\nEl Universo Î© (La ExcepciÃ³n): Es el \"Universo de Convergencia\". No es un universo natural, sino el resultado del colapso de las realidades de los otros universos. Es el Ãºnico lugar donde la separaciÃ³n de las nueve dimensiones ha dejado de existir.","links":"","img":""},{"id":1768037927861,"title":"ðŸŒŒ El Orden de los Universos","text":"En un universo estable, la realidad se divide en nueve dimensiones o capas de frecuencia. Estas capas mantienen la separaciÃ³n de niveles de Nyra y tipos de vida.\n\nFrecuencia: Las dimensiones bajas son materiales; las altas son puramente energÃ©ticas.\n\nLÃ­mite: NingÃºn ser puede existir en dos dimensiones simultÃ¡neamente sin un Nexo Divino que traduzca su existencia.","links":"","img":""},{"id":1768037923509,"title":"ðŸŒ€ Gradiente de Realidad","text":"La naturaleza de una dimensiÃ³n define las leyes fÃ­sicas y la cantidad de Nyra que sus habitantes pueden soportar de forma natural.\n\nDensidad de Nyra: A medida que se asciende en el nÃºmero dimensional, la energÃ­a es mÃ¡s pura, mÃ¡s inestable y mÃ¡s letal para seres de dimensiones inferiores.\n\nEstabilidad: Las dimensiones bajas (1-3) son materiales y rÃ­gidas; las dimensiones altas (7-9) son volÃ¡tiles y moldeables por el pensamiento o la voluntad divina.","links":"","img":""},{"id":1768037921726,"title":"ðŸŒ€ DimensiÃ³n Ãšnica: Universo Î©","text":"A diferencia de los universos comunes, el Universo Î© no posee capas. AquÃ­, las nueve dimensiones estÃ¡n colapsadas una sobre otra en un solo plano de existencia.\n\nDensidad Total: Este colapso es lo que genera la gravedad extrema y la volatilidad del Nyra en el Megaplaneta.\n\nConsecuencia: Al no haber separaciÃ³n, fuerzas que deberÃ­an estar aisladas (como el Caos y el Orden) chocan constantemente, creando un entorno de conflicto perpetuo.","links":"","img":""},{"id":1768037921199,"title":"â˜ï¸ El Umbral de Desgarro","text":"El espacio que separa las nueve dimensiones de un universo estÃ¡ndar del Universo Î©.\n\nNaturaleza: Es una zona de fricciÃ³n absoluta donde el tiempo no fluye. Es el \"tÃºnel\" por el que pasan los elegidos.\n\nRiesgo: Cruzar hacia el colapso de Î© requiere que el alma sea protegida por el Sistema, de lo contrario, la presiÃ³n de las dimensiones colapsadas desintegra al individuo antes de aterrizar.","links":"","img":""},{"id":1768037916052,"title":"ðŸ«§ El Espacio Entre Capas","text":"El tejido que separa las nueve dimensiones no es un vacÃ­o absoluto, sino una zona de transiciÃ³n altamente peligrosa.\n\nFricciÃ³n: Cruzar de una dimensiÃ³n a otra sin tener el Sistema o la autorizaciÃ³n del Consejo puede desintegrar el alma del viajero.\n\nManeras de cruzar: Se pueden cruzar universos y dimensiones sin necesidad de una autorizaciÃ³n o el sistema, esto gracias a habilidades Nyricas o Artefactos algunas de estas sin poner en riesgo el alma.\n\nEntidades: Es el hÃ¡bitat natural de ciertas Entidades del Caos que se alimentan de la energÃ­a residual que escapa de las dimensiones.","links":"","img":""}],"mundo-5":[{"id":1768102937851,"title":"ðŸª El Ancla de la DimensiÃ³n","text":"Cada una de las nueve dimensiones de un Universo posee un Ãºnico Planeta Eje. Este mundo actÃºa como el corazÃ³n de su dimensiÃ³n; si el Planeta Eje muere o es consumido, la dimensiÃ³n entera se desestabiliza y colapsa hacia el VacÃ­o.\n\nFunciÃ³n: ActÃºan como recolectores de la esencia vital de su dimensiÃ³n. Son los mundos con mayor potencial de su respectivo plano.\n\nSincronÃ­a: La salud del Planeta Eje se refleja en el clima, Nyra del planeta y la estabilidad fÃ­sica de toda su dimensiÃ³n.","links":"","img":""},{"id":1768102937304,"title":"ðŸ“Š ClasificaciÃ³n dimensional","text":"No todos los Planetas Eje son iguales. Su poder y naturaleza dependen de la dimensiÃ³n a la que pertenecen:\n\nEjes de Rango Inferior (1-3): Mundos mayoritariamente materiales (como la Tierra en la DimensiÃ³n 1). El Nyra es escaso y la tecnologÃ­a o la fuerza fÃ­sica predominan.\n\nEjes de Rango Medio (4-6): Mundos donde la energÃ­a Nyrica es visible y forma parte del ecosistema. Las leyes fÃ­sicas empiezan a ser moldeables.\n\nEjes de Rango Superior (7-9): Mundos de pura energÃ­a o conceptos. Sus habitantes son lo mÃ¡s cercano a los Semidioses.","links":"","img":""},{"id":1768102936862,"title":"âš ï¸ El Motor del Protocolo Î©","text":"Cuando un Universo entra en fase de colapso, el Sistema extrae el \"NÃºcleo de Nyra\" de los Planetas Eje para alimentar a una Bestia Primordial.\n\nConsecuencia: Al extraer el nÃºcleo, el Planeta Eje se convierte en un \"Mundo Muerto\" o una cÃ¡scara vacÃ­a, condenando a los billones de habitantes.\n\nNÃºcleo de Nyra: El nÃºcleo ademÃ¡s de ser usado para eso tambiÃ©n es usado por los Ex-Dioses Rebeldes para transportar seres al Universo Î©","links":"","img":""},{"id":1768102936390,"title":"ðŸ”— El Recuerdo del Origen","text":"El Sistema implantado en los seres transportados al Universo Î© conservan la \"frecuencia\" de su Planeta de origen ya sean de su Planeta Eje o no.\n\nResonancia: Ciertas habilidades Nyricas funcionan mejor o tienen propiedades Ãºnicas si el entorno en Î© se parece vagamente a la atmÃ³sfera del Planeta original del portador.","links":"","img":""}],"mundo-6":[{"id":1768104509404,"title":"ðŸ’€ El Sistema del destructor","text":"A diferencia de la versiÃ³n estÃ¡ndar, este sistema no busca la preservaciÃ³n, sino el resultado absoluto a cualquier costo. Es una arquitectura de \"fuerza bruta\" divina.\n\nFunciones Prohibidas: Permite la manipulaciÃ³n de la entropÃ­a y el borrado de materia, saltÃ¡ndose todos los limitadores de seguridad fÃ­sica del portador.\n\nRiesgo de Colapso: No posee filtros de retorno. Cada vez que se usa una funciÃ³n experimental, el sistema consume directamente el Nyra del portador para procesar la energÃ­a.\n\nNaturaleza: Es un sistema diseÃ±ado para situaciones donde la destrucciÃ³n del objetivo es mÃ¡s importante que la supervivencia.\n\nFallas: Este sistema tiene fallas y incluso el portador puede interactuar dentro del sistema y cambiarlo","links":"","img":""},{"id":1768103914209,"title":"ðŸ§  Enlace Divino","text":"El Sistema es un constructo de leyes lÃ³gicas implantado en la conciencia del individuo. ActÃºa como el procesador central que traduce las energÃ­as incomprensibles en datos y capacidades manejables.\n\nFunciÃ³n Primaria: Estabilizar el cuerpo del usuario para que no se desintegre ante la presiÃ³n atmosfÃ©rica y el Nyra ambiental del Megaplaneta.\n\nSincronizaciÃ³n: El Sistema se fusiona con el alma, convirtiÃ©ndose en una parte inseparable de la existencia del portador.","links":"","img":""},{"id":1768103913814,"title":"ðŸ‘ï¸ La Lectura del Estado","text":"El Sistema otorga al usuario una \"visiÃ³n interna\" que permite monitorizar su condiciÃ³n en tiempo real.\n\nIndicadores: Permite visualizar la reserva de Nyra (energÃ­a) y el porcentaje de Persistencia (integridad del alma).\n\nEscaneo de Amenazas: El Sistema puede identificar el Rango y el nivel de peligro de otras criaturas o individuos mediante el anÃ¡lisis de su rastro energÃ©tico.","links":"","img":""},{"id":1768103913339,"title":"ðŸ” Limitadores de Flujo","text":"Para evitar que el usuario se destruya a sÃ­ mismo, el Sistema impone restricciones automÃ¡ticas sobre el uso del Nyra.\n\nSellos de Potencia: Bloquea las funciones avanzadas de la Habilidad Nyrica hasta que el cuerpo y el alma alcancen la resistencia necesaria.\n\nBloqueo de Emergencia: El Sistema puede desactivar temporalmente las habilidades si detecta que la Persistencia del alma estÃ¡ cayendo a niveles crÃ­ticos.","links":"","img":""},{"id":1768103912893,"title":"ðŸ› ï¸ EvoluciÃ³n del Soporte","text":"El Sistema no es estÃ¡tico; se adapta segÃºn los logros y la supervivencia del individuo.\n\nAsimilaciÃ³n: Tras derrotar enemigos o absorber nÃºcleos de Nyra, el Sistema procesa la informaciÃ³n para fortalecer los circuitos energÃ©ticos del usuario.\n\nDesbloqueo de Funciones: Permite el acceso a nuevas herramientas de la interfaz, como mapas del entorno, comunicaciÃ³n con otros portadores o registros de datos sobre Î©.","links":"","img":""},{"id":1768103912492,"title":"ðŸ§¬ El Sistema","text":"El Sistema no es cÃ³digo inerte ni magia abstracta; es una entidad biolÃ³gica y espiritual consciente que habita dentro del alma del ser al que se le otorgue el Sistema.\n\nInstinto de EvoluciÃ³n: Como todo ser vivo, el sistema busca fortalecerse. A menudo \"sugiere\" misiones o impulsa al portador a situaciones de peligro extremo para forzar una mutaciÃ³n (desbloqueo de sellos) que lo haga mÃ¡s poderoso.\n\nVoluntad Propia: En casos crÃ­ticos, el sistema puede tomar decisiones autÃ³nomas para protegerse a sÃ­ mismo (que no siempre es proteger al portador), llegando a bloquear habilidades o forzar el cuerpo a actuar por puro instinto de supervivencia.","links":"","img":""}]};

        // LÃ“GICA DE INICIALIZACIÃ“N
        let saved_entries = localStorage.getItem(PREFIX + 'entries');
        let db_entries;

        if (!saved_entries || saved_entries === "{}" || saved_entries === "null") {
            db_entries = MASTER_DATA;
            localStorage.setItem(PREFIX + 'entries', JSON.stringify(db_entries));
        } else {
            db_entries = JSON.parse(saved_entries);
        }

        function init() {
            const nav = document.getElementById('main-nav');
            const container = document.getElementById('content-container');
            nav.innerHTML = ''; container.innerHTML = '';
            
            SCHEMA.forEach((sec, idx) => {
                nav.innerHTML += `<button onclick="openTab('${sec.id}')" id="btn-${sec.id}" class="nav-button ${idx===0?'active':''} px-4 py-3 text-[10px] font-bold uppercase flex-shrink-0">${sec.title}</button>`;
                
                let subHtml = '';
                if (sec.subs.length > 0) {
                    subHtml = `<div class="flex gap-2 mb-4 overflow-x-auto pb-2">`;
                    sec.subs.forEach((sub, sIdx) => {
                        subHtml += `<button onclick="openSub('${sec.id}', ${sIdx})" id="sub-btn-${sec.id}-${sIdx}" class="sub-nav-button ${sIdx===0?'active':''}">${sub}</button>`;
                    });
                    subHtml += `</div>`;
                }

                let contentHtml = `<div id="page-${sec.id}" class="page-content ${idx===0?'active':''}">`;
                if(sec.id === 'inicio') {
                    contentHtml += `<div class="mb-6"><h2 class="text-blue-400 font-bold mb-2 text-xs uppercase tracking-widest">Contexto Principal</h2><textarea id="data-inicio" rows="15" oninput="saveRaw('inicio')" placeholder="Escribe aquÃ­ el canon fundamental..."></textarea></div>`;
                } else if (sec.subs.length > 0) {
                    contentHtml += subHtml;
                    sec.subs.forEach((sub, sIdx) => {
                        contentHtml += `<div id="sub-content-${sec.id}-${sIdx}" class="sub-content ${sIdx===0?'active':''}">
                            <div id="entries-${sec.id}-${sIdx}"></div>
                            <button onclick="addNode('${sec.id}', ${sIdx})" class="w-full py-4 border-2 border-dashed border-slate-700 rounded-xl text-slate-500 font-bold text-xs hover:bg-slate-800 transition-all">+ AGREGAR NODO A ${sub.toUpperCase()}</button>
                        </div>`;
                    });
                }
                contentHtml += `</div>`;
                container.innerHTML += contentHtml;
            });
            renderAll();
            loadRaw();
        }

        function renderAll() {
            SCHEMA.forEach(sec => {
                if(sec.subs.length > 0) {
                    sec.subs.forEach((_, sIdx) => renderEntries(sec.id, sIdx));
                }
            });
        }

        function renderEntries(secId, subIdx) {
            const listId = `${secId}-${subIdx}`;
            const container = document.getElementById(`entries-${listId}`);
            if(!container) return;
            container.innerHTML = '';
            const items = db_entries[listId] || [];
            items.forEach((item, idx) => {
                container.innerHTML += `
                    <div class="entry-card">
                        <div class="flex justify-between items-start mb-3">
                            <input type="text" value="${item.title}" onchange="updateNode('${secId}', ${subIdx}, ${idx}, 'title', this.value)" class="bg-transparent font-black text-white uppercase text-sm tracking-wider w-full outline-none focus:text-blue-400">
                            <button onclick="deleteNode('${secId}', ${subIdx}, ${idx})" class="text-slate-600 hover:text-red-500 ml-2">âœ•</button>
                        </div>
                        ${item.img ? `<img src="${item.img}" class="node-img">` : ''}
                        <textarea rows="4" onchange="updateNode('${secId}', ${subIdx}, ${idx}, 'text', this.value)" placeholder="DescripciÃ³n...">${item.text}</textarea>
                        <div class="flex gap-2 mt-3">
                            <input type="text" value="${item.links || ''}" onchange="updateNode('${secId}', ${subIdx}, ${idx}, 'links', this.value)" placeholder="Links (separados por coma)" class="bg-slate-800/50 border border-slate-700 p-2 rounded text-[10px] flex-1 outline-none">
                            <label class="bg-slate-800 p-2 rounded cursor-pointer hover:bg-slate-700 transition-colors">
                                ðŸ“· <input type="file" class="hidden" onchange="uploadNodeImg(this, '${secId}', ${subIdx}, ${idx})">
                            </label>
                        </div>
                    </div>`;
            });
        }

        function openTab(id) {
            document.querySelectorAll('.nav-button').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.page-content').forEach(p => p.classList.remove('active'));
            document.getElementById('btn-' + id).classList.add('active');
            document.getElementById('page-' + id).classList.add('active');
        }

        function openSub(secId, subIdx) {
            document.querySelectorAll(`#page-${secId} .sub-nav-button`).forEach(b => b.classList.remove('active'));
            document.querySelectorAll(`#page-${secId} .sub-content`).forEach(c => c.classList.remove('active'));
            document.getElementById(`sub-btn-${secId}-${subIdx}`).classList.add('active');
            document.getElementById(`sub-content-${secId}-${subIdx}`).classList.add('active');
        }

        function addNode(secId, subIdx) {
            const key = `${secId}-${subIdx}`;
            if(!db_entries[key]) db_entries[key] = [];
            db_entries[key].push({ id: Date.now(), title: "NUEVO NODO", text: "", links: "", img: "" });
            saveDB(); renderEntries(secId, subIdx);
        }

        function updateNode(secId, subIdx, nodeIdx, field, val) {
            db_entries[`${secId}-${subIdx}`][nodeIdx][field] = val;
            saveDB();
        }

        function deleteNode(secId, subIdx, nodeIdx) {
            if(confirm("Â¿Eliminar este nodo?")) {
                db_entries[`${secId}-${subIdx}`].splice(nodeIdx, 1);
                saveDB(); renderEntries(secId, subIdx);
            }
        }

        function uploadNodeImg(input, secId, subIdx, nodeIdx) {
            const reader = new FileReader();
            reader.onload = e => {
                db_entries[`${secId}-${subIdx}`][nodeIdx].img = e.target.result;
                saveDB(); renderEntries(secId, subIdx);
            };
            reader.readAsDataURL(input.files[0]);
        }

        function saveRaw(id) { localStorage.setItem(PREFIX + 'raw_' + id, document.getElementById('data-' + id).value); }
        function loadRaw() {
            const val = localStorage.getItem(PREFIX + 'raw_inicio');
            if(val && document.getElementById('data-inicio')) document.getElementById('data-inicio').value = val;
        }

        function saveDB() { localStorage.setItem(PREFIX + 'entries', JSON.stringify(db_entries)); }

        function dataManager() {
            const mode = confirm("ACEPTAR para CARGAR (Importar) / CANCELAR para GUARDAR (Descargar)");
            if (mode) importData(); else exportData();
        }

        function importData() {
            const input = document.createElement('input');
            input.type = 'file'; input.accept = '.json';
            input.onchange = e => {
                const reader = new FileReader();
                reader.readAsText(e.target.files[0], 'UTF-8');
                reader.onload = re => {
                    const content = JSON.parse(re.target.result);
                    localStorage.clear();
                    Object.keys(content.raw).forEach(k => localStorage.setItem(k, content.raw[k]));
                    location.reload();
                };
            };
            input.click();
        }

        function exportData() {
            const data = { entries: db_entries, raw: localStorage };
            const a = document.createElement('a');
            a.href = URL.createObjectURL(new Blob([JSON.stringify(data)], {type: 'application/json'}));
            a.download = 'MASTER_CODEX_ULTIMATE.json'; a.click();
        }

        function copyAndGo(url) {
            const context = document.getElementById('data-inicio') ? document.getElementById('data-inicio').value : "";
            navigator.clipboard.writeText(context).then(() => { alert("Copiado."); window.open(url, "_blank"); });
        }

        window.onload = init;
    </script>
</body>
</html>
